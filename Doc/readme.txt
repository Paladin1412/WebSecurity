一些知识点整理：

内网ip
ipv4是目前比较广泛使用的一个版本，它是由32位二进制数组成的，但是ip毕竟是有限的，随着计算机的爆炸性增长和移动网络的普及，ip地址越来越不够用，
于是出现了一门技术叫NAT技术，NAT（Network Address Translation）网络地址转换，就是替换ip报文头部的地址信息。
NAT通常部署在一个组织的网络出口位置，通过将内部网络IP地址替换为出口的IP地址提供公网可达性和上层协议的连接能力。那么，什么是内部网络IP地址？
RFC1918规定了三个保留地址段落：
10.0.0.0-10.255.255.255；
172.16.0.0-172.31.255.255；
192.168.0.0-192.168.255.255。
这三个范围分别处于A,B,C类的地址段，不向特定的用户分配，被IANA作为私有地址保留。这些地址可以在任何组织或企业内部使用，
和其他Internet地址的区别就是，仅能在内部使用，不能作为全球路由地址。这就是说，出了组织的管理范围这些地址就不再有意义，无论是作为源地址，还是目的地址。
对于一个封闭的组织，如果其网络不连接到Internet，就可以使用这些地址而不用向IANA提出申请，而在内部的路由管理和报文传递方式与其他网络没有差异。
简单的来讲，计算机在内网会获得一个ip地址，这个地址被称作内网ip，它仅仅是在内网内不能重复，当内网的一台计算机想要跟外网通信的时候，
需要通过NAT做ip转换，也就是把计算机的内网ip转换为外网ip。这样可以大大的缓解ip数量危机。


端口映射：
端口映射就是将主机的IP地址的一个端口映射到局域网中一台机器，当用户访问这个IP的这个端口时，服务器自动将请求映射到对应局域网分机

要在网吧中实现挂马，就必须将木马植入到服务器汇总，在入侵服务器后，还需要将服务器中的木马与外部网络连接起来，这就需要端口映射，端口映射又叫做端口转发。
这里所说的端口，不是电脑硬件的I/O进出端口，而是软件形式上的概念。服务器可以向外提个多种服务，比如，一台服务器可以同时是WEB服务器和FTP服务器，另外还可以是邮件服务器，各种服务器采用不同的端口分别提供不同的服务。
内网中的一台电脑要上网以便对外开放服务或接收数据，都需要进行端口映射。端口映射分为动态端口映射和静态端口映射两种。
所谓动态端口映射，譬如内网中的一台电脑要访问新浪网，会向NAT网关发送数据包，包头中包括对方（也就是新浪网Ip、端口和本机IP，NAT网关会把本机IP和端口分别替换成自己的公网IP和一个未使用的端口，并且会记下这个映射关系，为在以后转发数据包时使用，然后再把数据发给新浪网，新浪网在收到数据后作出反应，发送数据到NAT网关到那个未使用的端口，然后NAT网关将数据转发给内网中的那台电脑实现内网和公网的通信。当连接关闭时，NAT网关会释放分配给这条连接的端口，以便后面的连接可以继续使用这个端口。
而静态端口映射，就是在NAT网关上开放一个固定的端口，然后设定此端口收到的数据要转发给内网哪个IP和端口，此时，不管电脑有没有连接，这个映射关系都会一直存在，从而使公网主动访问内网中的那台电脑。


在启动容器时，如果不配置宿主机器与虚拟机的端口映射，外部程序是无法访问虚拟机的，因为没有端口。
    端口映射的指令是什么？
docker指令：docker run -p ip:hostPort:containerPort redis
使用-p参数会分配宿主机的端口映射到虚拟机。
IP表示主机的IP地址。
hostPort表示宿主机的端口。
containerPort表示虚拟机的端口。
    支持的格式有三种：
ip:hostPort:containerPort：映射指定地址的指定端口到虚拟机的指定端口（不常用）
如：127.0.0.1:3306:3306，映射本机的3306端口到虚拟机的3306端口。
ip::containerPort：映射指定地址的任意端口到虚拟机的指定端口。（不常用）
如：127.0.0.1::3306，映射本机的3306端口到虚拟机的3306端口。
hostPort:containerPort：映射本机的指定端口到虚拟机的指定端口。（常用）
如：3306:3306，映射本机的3306端口到虚拟机的3306端口。
   如何查看是否映射成功？
使用docker ps命令查看
出现6379/tcp的表示宿主机并没有打开与虚拟机的端口映射。
出现0.0.0.0:3306->3306/tcp表示宿主机的3306端口映射到了虚拟机的3306端口。
也可以使用docker port NAME查看端口映射情况。
表示虚拟机的3306端口映射到了主机的3306端口。
如果没有任何回复，表示端口映射失败。
